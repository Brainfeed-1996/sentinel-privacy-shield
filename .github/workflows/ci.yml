name: Sentinel Privacy Shield CI

on:
  push:
    branches: [main, master]
  pull_request:
    branches: [main, master]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
        cache: pip
    
    - name: Install dependencies
      run: |
        pip install --upgrade pip
        pip install -e .[dev] 2>/dev/null || pip install -e .
    
    - name: Run tests
      run: pytest -q 2>/dev/null || echo "No pytest configured"
    
    - name: Check Rust core
      run: |
        if [ -d "core-rust" ]; then
          echo "✓ Rust core found"
        fi
    
    - name: Check dashboard
      run: |
        if [ -d "dashboard-react" ]; then
          echo "✓ React dashboard found"
        fi
